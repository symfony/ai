#!/usr/bin/env sh

set -eu

SCRIPT_DIR=$(CDPATH= cd -- "$(dirname "$0")" && pwd)
PROJECT_DIR=$(CDPATH= cd -- "$SCRIPT_DIR/.." && pwd)

if ! command -v codex >/dev/null 2>&1; then
    echo "Codex CLI is not installed or not available in PATH." >&2
    echo "Install Codex and try again." >&2
    exit 1
fi

cd "$PROJECT_DIR"

exec codex \
    -c "mcp_servers.symfony_ai_mate_local.command='./vendor/bin/mate'" \
    -c "mcp_servers.symfony_ai_mate_local.args=['serve','--force-keep-alive']" \
    "$@"
